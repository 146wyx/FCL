<UserControl x:Class="FunCraftLauncher.Views.SettingsPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#FF2D2D2D">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 标题 -->
        <TextBlock Grid.Row="0" Text="设置" FontSize="24" FontWeight="Bold" Foreground="White" Margin="0,0,0,20"/>

        <!-- 设置内容 - 使用TabControl -->
        <TabControl Grid.Row="1" Background="#FF2D2D2D" BorderBrush="#FF444444">
            <!-- Java设置 -->
            <TabItem Header="Java" Foreground="White">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15">
                        <GroupBox Header="Java路径" Foreground="White" BorderBrush="#FF444444" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="AutoFindJavaCheck" Content="自动查找Java" 
                                          Foreground="White" Margin="0,0,0,10"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBox x:Name="JavaPathTextBox" Grid.Column="0" 
                                             Background="#FF3D3D3D" Foreground="White" BorderBrush="#FF555555"/>
                                    <Button x:Name="BrowseJavaButton" Grid.Column="1" Content="浏览..." 
                                            Width="60" Margin="5,0,0,0" Click="BrowseJavaButton_Click"/>
                                </Grid>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="内存设置" Foreground="White" BorderBrush="#FF444444" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="最大内存:" VerticalAlignment="Center" Margin="0,0,10,0" Foreground="White"/>
                                    <Slider x:Name="MaxMemorySlider" Grid.Column="1" Minimum="512" Maximum="32768" 
                                            Value="2048" TickFrequency="512" IsSnapToTickEnabled="True"
                                            ValueChanged="MaxMemorySlider_ValueChanged"/>
                                    <TextBlock x:Name="MaxMemoryText" Grid.Column="2" Text="2048 MB" 
                                               VerticalAlignment="Center" Margin="10,0,0,0" Width="70" Foreground="White"/>
                                </Grid>
                                <Grid Margin="0,10,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="最小内存:" VerticalAlignment="Center" Margin="0,0,10,0" Foreground="White"/>
                                    <Slider x:Name="MinMemorySlider" Grid.Column="1" Minimum="256" Maximum="8192" 
                                            Value="512" TickFrequency="256" IsSnapToTickEnabled="True"
                                            ValueChanged="MinMemorySlider_ValueChanged"/>
                                    <TextBlock x:Name="MinMemoryText" Grid.Column="2" Text="512 MB" 
                                               VerticalAlignment="Center" Margin="10,0,0,0" Width="70" Foreground="White"/>
                                </Grid>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="JVM参数" Foreground="White" BorderBrush="#FF444444" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <TextBlock Text="自定义JVM参数（可选）:" Foreground="#FFAAAAAA" Margin="0,0,0,5"/>
                                <TextBox x:Name="JvmArgsTextBox" Height="60" TextWrapping="Wrap" 
                                         AcceptsReturn="True" VerticalScrollBarVisibility="Auto"
                                         Background="#FF3D3D3D" Foreground="White" BorderBrush="#FF555555"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- 游戏设置 -->
            <TabItem Header="游戏" Foreground="White">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15">
                        <GroupBox Header="游戏目录" Foreground="White" BorderBrush="#FF444444" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBox x:Name="GameDirectoryTextBox" Grid.Column="0" 
                                             Background="#FF3D3D3D" Foreground="White" BorderBrush="#FF555555"/>
                                    <Button x:Name="BrowseGameDirButton" Grid.Column="1" Content="浏览..." 
                                            Width="60" Margin="5,0,0,0" Click="BrowseGameDirButton_Click"/>
                                </Grid>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="窗口设置" Foreground="White" BorderBrush="#FF444444" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="FullScreenCheck" Content="默认全屏模式" 
                                          Foreground="White" Margin="0,0,0,10"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="默认宽度:" VerticalAlignment="Center" Margin="0,0,5,0" Foreground="White"/>
                                    <TextBox x:Name="WindowWidthTextBox" Grid.Column="1" Text="854"
                                             Background="#FF3D3D3D" Foreground="White" BorderBrush="#FF555555"/>
                                    <TextBlock Grid.Column="2" Text="默认高度:" VerticalAlignment="Center" Margin="10,0,5,0" Foreground="White"/>
                                    <TextBox x:Name="WindowHeightTextBox" Grid.Column="3" Text="480"
                                             Background="#FF3D3D3D" Foreground="White" BorderBrush="#FF555555"/>
                                </Grid>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="启动选项" Foreground="White" BorderBrush="#FF444444" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="CheckIntegrityCheck" Content="启动前检查文件完整性" 
                                          IsChecked="True" Foreground="White" Margin="0,0,0,5"/>
                                <CheckBox x:Name="AutoCompleteCheck" Content="自动补全缺失文件" 
                                          IsChecked="True" Foreground="White" Margin="0,0,0,5"/>
                                <CheckBox x:Name="CloseLauncherCheck" Content="启动后关闭启动器" 
                                          Foreground="White" Margin="0,0,0,5"/>
                                <CheckBox x:Name="ShowOutputCheck" Content="显示游戏输出窗口" 
                                          Foreground="White" Margin="0,0,0,5"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- 下载设置 -->
            <TabItem Header="下载" Foreground="White">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15">
                        <GroupBox Header="下载源" Foreground="White" BorderBrush="#FF444444" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <TextBlock Text="选择下载源:" Foreground="#FFAAAAAA" Margin="0,0,0,5"/>
                                <ComboBox x:Name="DownloadSourceComboBox" Background="#FF3D3D3D" 
                                          Foreground="Black" BorderBrush="#FF555555">
                                    <ComboBoxItem Content="BMCLAPI (推荐)" Tag="bmclapi" IsSelected="True"/>
                                    <ComboBoxItem Content="Mojang官方" Tag="mojang"/>
                                </ComboBox>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="下载选项" Foreground="White" BorderBrush="#FF444444" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="并发下载数:" VerticalAlignment="Center" Margin="0,0,10,0" Foreground="White"/>
                                    <Slider x:Name="ConcurrentDownloadsSlider" Grid.Column="1" Minimum="1" Maximum="128" 
                                            Value="64" TickFrequency="1" IsSnapToTickEnabled="True"
                                            ValueChanged="ConcurrentDownloadsSlider_ValueChanged"/>
                                </Grid>
                                <TextBlock x:Name="ConcurrentDownloadsText" Text="64" Foreground="#FFAAAAAA" 
                                           HorizontalAlignment="Right" Margin="0,0,0,10"/>

                                <Grid Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="下载超时(秒):" VerticalAlignment="Center" Margin="0,0,10,0" Foreground="White"/>
                                    <Slider x:Name="DownloadTimeoutSlider" Grid.Column="1" Minimum="10" Maximum="300" 
                                            Value="60" TickFrequency="10" IsSnapToTickEnabled="True"
                                            ValueChanged="DownloadTimeoutSlider_ValueChanged"/>
                                </Grid>
                                <TextBlock x:Name="DownloadTimeoutText" Text="60秒" Foreground="#FFAAAAAA" 
                                           HorizontalAlignment="Right" Margin="0,0,0,10"/>

                                <CheckBox x:Name="AutoInstallCheck" Content="下载后自动安装" 
                                          IsChecked="True" Foreground="White" Margin="0,0,0,5"/>
                                <CheckBox x:Name="KeepInstallerCheck" Content="保留安装包" 
                                          Foreground="White" Margin="0,0,0,5"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- 外观设置 -->
            <TabItem Header="外观" Foreground="White">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15">
                        <GroupBox Header="主题" Foreground="White" BorderBrush="#FF444444" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <TextBlock Text="选择主题:" Foreground="#FFAAAAAA" Margin="0,0,0,5"/>
                                <ComboBox x:Name="ThemeComboBox" Background="#FF3D3D3D" 
                                          Foreground="Black" BorderBrush="#FF555555">
                                    <ComboBoxItem Content="深色 (Dark)" Tag="Dark" IsSelected="True"/>
                                    <ComboBoxItem Content="浅色 (Light)" Tag="Light"/>
                                </ComboBox>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="语言" Foreground="White" BorderBrush="#FF444444" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <TextBlock Text="选择语言:" Foreground="#FFAAAAAA" Margin="0,0,0,5"/>
                                <ComboBox x:Name="LanguageComboBox" Background="#FF3D3D3D" 
                                          Foreground="Black" BorderBrush="#FF555555">
                                    <ComboBoxItem Content="简体中文" Tag="zh-CN" IsSelected="True"/>
                                    <ComboBoxItem Content="繁體中文" Tag="zh-TW"/>
                                    <ComboBoxItem Content="English" Tag="en-US"/>
                                </ComboBox>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="其他" Foreground="White" BorderBrush="#FF444444" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="EnableAnimationsCheck" Content="启用动画效果" 
                                          IsChecked="True" Foreground="White" Margin="0,0,0,10"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="字体大小:" VerticalAlignment="Center" Margin="0,0,10,0" Foreground="White"/>
                                    <Slider x:Name="FontSizeSlider" Grid.Column="1" Minimum="10" Maximum="20" 
                                            Value="14" TickFrequency="1" IsSnapToTickEnabled="True"
                                            ValueChanged="FontSizeSlider_ValueChanged"/>
                                </Grid>
                                <TextBlock x:Name="FontSizeText" Text="14" Foreground="#FFAAAAAA" 
                                           HorizontalAlignment="Right" Margin="0,5,0,0"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- 底部按钮 -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
            <Button Content="恢复默认" Width="80" Height="30" Margin="0,0,10,0" Click="ResetButton_Click"/>
            <Button Content="保存设置" Width="80" Height="30" Background="#FF0078D4" Foreground="White" Click="SaveButton_Click"/>
        </StackPanel>
    </Grid>
</UserControl>
